#!/usr/bin/env node

var program = require('commander');
var Converter = require('../convert.js');
var fs = require('fs');
var path = require('path');
var _ = require('lodash').noConflict();

function parseArguments() {
	var strings = [
		//"curl -d '{\"Hello\":\"Va\'lue\"}'",
		'curl -G -A browser1 -X "POST" -H "Cache-Control:no-cache" -H "Postman-Token:0b95f584-a63e-73f2-3b0c-d3e07856ada9" -H "Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryp7MA4YWxkTrZu0gW" -F "type=t1" -F "id=id1" http://localhost:1337/follows ',
		"curl --request GET --url http://www.google.com",
		"curl http://google.com",
		"curl --request POST --url http://google.com"
		// "curl -d '{\"Hello\":\"Value\"}'",
		// "curl -d '{\"Hello\":\"Va\'lue\"}'"
	];

	var failed = false;

	_.each(strings, function(string) {
		console.log("For curl:   " + string);
		var output = Converter.convertCurlToRequest(string)
		if(output.error) {
			failed = true;
			console.log(output);
		}
		console.log("\n");
	});
	console.log('Failed: ' , failed)

    return (failed?-1:0);
}

process.exit(parseArguments());

// console.log(require('shell-quote').parse("curl --request GET --url http://www.google.com"));

// console.log(require('shell-quote').parse("curl -d '{\"Hello\":\"Value\"}'"));

// console.log(require('shell-quote').parse("curl -d '{\"Hello\":\"Va'lue\"}'"));

// console.log(require('shell-quote').parse("curl -d '{\"Hello\":\"Va\'lue\"}'"));

// console.log(require('shell-quote').parse("curl -d '{\"Hello\":\"Va\\'lue\"}'"));