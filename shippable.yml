# runtime matrix setting
language: node_js
node_js:
  - 4.3.0
env:
  - NODE_ENV=development

build:
  pre_ci_boot:
    image_name: postman/shippable_ubuntu1404
    image_tag: latest
    pull: true
    options: "-e HOME=/root"

  ci:
    # before_install
    - "sudo apt-get update && sudo apt-get install -y build-essential"
    # install
    - sudo npm update npm -g;
    - sudo npm install n -g
    - sudo n $SHIPPABLE_NODE_VERSION
    - "npm install -d --loglevel error;"
    # before_script
    # script
    - npm test

  cache: true

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - ci.notifications@postmanlabs.com
        - abhijit@getpostman.com
      on_success: change
      on_failure: always
    - integrationName: slack-shippable
      type: slack
      recipients:
        - "#shippable"
      on_success: change
      on_failure: always